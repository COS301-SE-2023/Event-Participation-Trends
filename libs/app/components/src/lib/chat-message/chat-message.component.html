<div [ngClass]="{'mt-0' : prevMessageSameUser, 'mt-2': !prevMessageSameUser}" class="relative">
  <label
    *ngIf="message.user.id === activeUserID && !prevMessageSameUser"
    class="absolute font-light text-sm"
    [ngClass]="{'right-[12px]': isUserEventManager && !isLargeScreen, 'left-[12px]': !isUserEventManager && !isLargeScreen, 'right-3': isUserEventManager && isLargeScreen, 'left-3': !isUserEventManager && isLargeScreen, 'text-ept-off-white': !isLargeScreen, 'text-gray-500': isLargeScreen}"
    >You</label
  >
  <label
    *ngIf="
      message.user.id !== activeUserID &&
      !prevMessageSameUser &&
      isUserEventManager
    "
    class="absolute font-light text-gray-500 mt-2 text-sm"
    [ngClass]="{'text-ept-off-white right-4': !isLargeScreen, 'text-gray-500 right-3': isLargeScreen}"
    >Manager</label
  >
  <div
    *ngIf="!isUserEventManager"
    class="flex justify-left items-center p-5 pl-3 pt-0"
    [ngClass]="{
      'pt-0': prevMessageSameUser,
      'pb-1': nextMessageSameUser,
      'pb-0': !nextMessageSameUser
    }"
  >
    <div
      class="flex flex-col items-center justify-evenly mr-3"
      [ngClass]="{ 'justify-center': message.user.id === activeUserID }"
    >
      <img
        id="userProfilePic"
        class="w-8 h-8 rounded-full"
        [ngClass]="{ 'opacity-0': prevMessageSameUser }"
        [src]="message.user.profilePic"
        [alt]="message.user.name"
      />
    </div>
    <div
      class="flex justify-between w-fit mr-16 pl-2 pr-2 rounded-md min-h-[40px]"
      [ngClass]="{
        'bg-[#D9D9D9]': message.user.id !== activeUserID,
        'bg-ept-blue-grey': message.user.id === activeUserID
      }"
    >
      <span class="text-sm p-1 self-center">{{ message.text }}</span>
      <div class="flex flex-col justify-end items-end p-1 ml-2">
        <span class="right-2 bottom-1 text-xs font-light text-gray-500">{{
          convertTimestampToDigitalTime(message.timestamp)
        }}</span>
      </div>
    </div>
  </div>
  <div
    *ngIf="isUserEventManager"
    class="flex justify-end items-center p-5 pr-3 pt-0"
    [ngClass]="{
      'pt-0': prevMessageSameUser,
      'pb-1': nextMessageSameUser,
      'pb-0': !nextMessageSameUser
    }"
  >
    <div
      class="mt-3 ml-16 bg-ept-bumble-yellow flex justify-between w-fit sm:max-w-[120px] md:max-w-[240px] w-[300px] pl-2 pr-2 rounded-md min-h-[40px]"
    >
      <span class="text-sm p-1 self-center">{{ message.text }}</span>
      <div class="flex flex-col justify-end items-center p-1 ml-2">
        <span class="right-2 bottom-1 text-xs font-light text-gray-500">{{
          convertTimestampToDigitalTime(message.timestamp)
        }}</span>
      </div>
    </div>
    <div class="flex flex-col items-center justify-evenly ml-3">
      <img
        id="userProfilePic"
        class="w-8 h-8 rounded-full"
        [ngClass]="{ 'opacity-0': prevMessageSameUser }"
        [src]="message.user.profilePic"
        [alt]="message.user.name"
      />
    </div>
  </div>
</div>
