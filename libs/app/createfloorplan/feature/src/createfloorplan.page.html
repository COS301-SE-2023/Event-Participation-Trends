<!-- <subpagenav [currentPage]="'/home/createfloorplan'"></subpagenav> -->

<ion-content [fullscreen]="true" class="overflow-y-scroll">
  <div class="grid grid-cols-12 gap-3 p-3 h-full">
    <div
      class="tool-menu col-span-2 rounded-lg md:rounded-xl shadow-[0px_5px_15px_2px_rgba(0,0,0,0.2)] text-ept-deep-grey relative"
    >
      <h1 class="text-lg font-semibold text-center mt-5">Tools</h1>
      <h3
        class="components-heading flex justify-between items-center mt-6 ml-2 cursor-pointer"
        (click)="toggleDropdown()"
      >
        Components
        <button class="dropdown-toggle" class="mr-3" (click)="toggleDropdown()">
          <ion-icon
            [class.dropdown-icon]="true"
            [class.rotated]="isDropdownOpen"
            name="chevron-down-outline"
            (click)="toggleDropdown()"
          ></ion-icon>
        </button>
      </h3>
      <div
        class="components-list mb-1 overflow-hidden"
        [class.show]="isDropdownOpen"
      >
        <div class="overflow-y-auto max-h-52">
          <p
            class="border-2 rounded-lg p-1 w-24 mt-2 cursor-grab"
            draggable="true"
            (dragstart)="onDragStart($event)"
          >
            Sensor 1
          </p>
          <p
            class="border-2 rounded-lg p-1 w-24 mt-2 cursor-grab"
            draggable="true"
            (dragstart)="onDragStart($event)"
          >
            Sensor 2
          </p>
          <p
            class="border-2 rounded-lg p-1 w-24 mt-2 cursor-grab"
            draggable="true"
            (dragstart)="onDragStart($event)"
          >
            Sensor 3
          </p>
        </div>
      </div>
      <h3 class="attributes-heading mt-3 ml-2">Component Attributes</h3>
      <div
        *ngIf="!shouldStackVertically"
        id="attributes-container"
        class="flex flex-col"
      >
        <ion-item class="attributes-list flex" lines="none">
          <ion-label class="ion-col-4 mr-3">Width:</ion-label>
          <ion-input
            class="ion-col-8"
            class="input-field ml-auto input focus:outline-none focus:ring-2 focus:ring-blue-500 mr-10 border-2 rounded h-7"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </ion-item>
        <ion-item class="attributes-list flex" lines="none">
          <ion-label class="ion-col-4 mr-2">Height:</ion-label>
          <ion-input
            class="ion-col-8"
            class="input-field input focus:outline-none focus:ring-2 focus:ring-blue-500 mr-10 border-2 rounded h-7"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </ion-item>
        <ion-item class="attributes-list flex" lines="none">
          <ion-label class="ion-col-4 mr-3">Angle:</ion-label>
          <ion-input
            class="ion-col-8"
            class="input-field input focus:outline-none focus:ring-2 focus:ring-blue-500 mr-10 border-2 rounded h-7"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </ion-item>
      </div>
      <div
        *ngIf="shouldStackVertically"
        id="attributes-container"
        class="flex flex-col items-center justify-evenly"
      >
        <div>
          <ion-label>Width:</ion-label>
          <ion-input
            class="input-field input focus:outline-none focus:ring-2 focus:ring-blue-500 border-2 rounded h-7 l"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </div>
        <div class="mt-3">
          <ion-label>Height:</ion-label>
          <ion-input
            class="input-field input focus:outline-none focus:ring-2 focus:ring-blue-500 border-2 rounded h-7"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </div>
        <div class="mt-3">
          <ion-label>Angle:</ion-label>
          <ion-input
            class="input-field input focus:outline-none focus:ring-2 focus:ring-blue-500 border-2 rounded h-7"
            type="number"
            step="0.01"
            value="0"
          ></ion-input>
        </div>
      </div>

      <ion-button
        class="create-event mt-20 ml-20 right-2.5 h-40px text-ept-off-white text-sm/16 rounded-lg bg-green-500 drop-shadow-lg absolute bottom-0 mb-10 hover:scale-102 hover:bg-opacity-100 hover:shadow-[0px_2px_7px_2px_rgba(0,0,0,0.2)]"
        >Create Event</ion-button
      >
    </div>
    <div
      id="canvasParent"
      #canvasParent
      class="relative col-span-10 border-4 border-black rounded-lg md:rounded-xl shadow-[0px_5px_15px_2px_rgba(0,0,0,0.2)] text-ept-deep-grey p-2"
      (drop)="onDrop($event)"
      (dragover)="onDragOver($event)"
    >
      <p
        class="bg-white z-50 rounded-md text-center text-2xl text-ept-deep-grey text-opacity-30 font-semibold mt-10 absolute top-1/2 left-1/3"
        *ngIf="noItemsAdded()"
      >
        Drag a component to the canvas
      </p>
      <div
        id="canvasElement"
        #canvasElement
        class="border-ept-off-white border-4 rounded-lg md:rounded-xl"
      ></div>
      <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2">
        <img
          #dustbin
          *ngIf="!noItemsAdded()"
          class="dustbin"
          (dragover)="onDustbinDragOver($event)"
          (dragleave)="onDustbinDragLeave($event)"
          (mouseup)="onDustbinMouseUp($event)"
          [ngClass]="{'drag-over': openDustbin}"
          [src]="openDustbin ? 'assets/trash-open.svg' : 'assets/trash-svgrepo-com.svg'"
          alt="trash"
          class="bg-white h-10 transition-all duration-300"
        />
      </div>
    </div>
  </div>
</ion-content>
